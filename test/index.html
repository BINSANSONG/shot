<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="./main.css" />
    <link rel="stylesheet" href="./shotTest.css" />
    <title>gifpy search engine</title>
  </head>

  <body>
    <!-- main GIF -->
    <div id="main-area" class="container container-padding50"></div>
    <!-- 검색 창 -->
    <div class="container container-padding50">
      <input type="text" id="js-input" class="container-textinput" />
      <button id="js-button" class="container-button">search</button>
    </div>

    <!-- 결과 창 -->
    <div id="result-area" class="container container-padding50"></div>
    <script src="./main.js"></script>
    <script src="./gif_tv.js"></script>

    <script>
      const point = document.createElement("div");
      const gun = document.createElement("img");
      document.body.appendChild(point);
      document.body.appendChild(gun);
  
      window.onkeydown = function() {
        console.log(event.keyCode);
        if (event.keyCode === 18 && !document.querySelectorAll('.cursor').length) {
          document.body.style.cursor='none';
          point.setAttribute("class", "cursor target-point");
          gun.setAttribute("class", "cursor");
          gun.setAttribute("src", "./pistol.png");
          gun.style.zIndex = 1;
          document.onmousedown = animateCircles; // circle follow mouse
          document.onmousemove = animateGun;
        }
      };
      window.onkeyup = function() {
        console.log(event.keyCode);
        if (event.keyCode === 18) {
          document.onmousedown = null; // circle follow mouse
          document.onmousemove = null;
          document.body.style.cursor='default';
          point.setAttribute("class", "");
          gun.setAttribute("class", "");
          gun.setAttribute("src", "");
        }
      };
      const bullets = ["bullet1", "bullet2", "bullet3", "bullet4"];

      function animateGun(event) {
        const point = document.querySelectorAll(".cursor");
        point[0].style.left = event.pageX + "px";
        point[0].style.top = event.pageY + "px";

        point[1].style.left = event.pageX + 100 + "px";
        point[1].style.top = event.pagey + 100 + "px";
      }
      function animateCircles(event) {
        // randomize color
        // const bulletImg = bullets[Math.floor(Math.random() * bullets.length)];
        const bullet = document.createElement("img");
        bullet.setAttribute("class", "bullet");
        bullet.setAttribute("src", `bullet.png`);
        bullet.style.width = "70px";
        bullet.style.height = "70px";
        document.body.appendChild(bullet); // adds function to body
        // adds motion

        const imgWidth = bullet.clientWidth;
        const imgHeight = bullet.clientHeight;
        bullet.style.left = event.clientX - imgWidth / 2 + "px";
        bullet.style.top = event.clientY - imgHeight / 2 + "px";

        setTimeout(() => {
          // bullet.animate({opacity:'0'},1000);
          bullet.remove();
        }, 3000);
      }
    </script>
  </body>
</html>
